<!-- HEADER -->
<div class="header-dashboard">
  <div class="container-fluid">
    <div class="header-body">
      <h1 class="title-dashboard">
        {{ mode == 1 ? 'Info Producto' : (mode == 2 ? 'Crear Producto' : 'Actualizar Producto') }}
      </h1>
      <p class="subtitle-dashboard">Administra la información de tus productos de manera rápida y segura</p>
    </div>
  </div>
</div>

<!-- PAGE CONTENT -->
<div class="container-fluid mt--7">
  <div class="row justify-content-center">
    <div class="col-lg-8">
      <div class="card card-ice shadow">
        <div class="card-body">

          <form [formGroup]="theFormGroup">
            <div class="form-group mb-3">
              <label>ID</label>
              <input type="text" class="form-control" formControlName="id" disabled>
            </div>

            <div class="form-group mb-3">
              <label>Nombre</label>
              <input type="text" class="form-control" formControlName="name" [disabled]="mode == 1">
              <div class="text-error" *ngIf="getTheFormGroup.name.errors && (getTheFormGroup.name.dirty || getTheFormGroup.name.touched || trySend)">
                <small *ngIf="getTheFormGroup.name.errors.required">Requerido</small>
                <small *ngIf="getTheFormGroup.name.errors.minlength">Mínimo 3 caracteres</small>
                <small *ngIf="getTheFormGroup.name.errors.maxlength">Máximo 100 caracteres</small>
              </div>
            </div>

            <div class="form-group mb-3">
              <label>Descripción</label>
              <textarea class="form-control" rows="3" formControlName="description" [disabled]="mode == 1"></textarea>
              <div class="text-error" *ngIf="getTheFormGroup.description.errors && (getTheFormGroup.description.dirty || getTheFormGroup.description.touched || trySend)">
                <small *ngIf="getTheFormGroup.description.errors.required">Requerido</small>
                <small *ngIf="getTheFormGroup.description.errors.minlength">Mínimo 3 caracteres</small>
                <small *ngIf="getTheFormGroup.description.errors.maxlength">Máximo 100 caracteres</small>
              </div>
            </div>

            <div class="form-group mb-3">
              <label>Precio</label>
              <input type="number" class="form-control" formControlName="price" [disabled]="mode == 1" min="0.01" step="0.01">
              <div class="text-error" *ngIf="getTheFormGroup.price.errors && (getTheFormGroup.price.dirty || getTheFormGroup.price.touched || trySend)">
                <small *ngIf="getTheFormGroup.price.errors.required">Requerido</small>
                <small *ngIf="getTheFormGroup.price.errors.min">Debe ser mayor a 0</small>
              </div>
            </div>

            <div class="form-group mb-4">
              <label>Categoría</label>
              <input type="text" class="form-control" formControlName="category" [disabled]="mode == 1">
              <div class="text-error" *ngIf="getTheFormGroup.category.errors && (getTheFormGroup.category.dirty || getTheFormGroup.category.touched || trySend)">
                <small *ngIf="getTheFormGroup.category.errors.required">Requerido</small>
                <small *ngIf="getTheFormGroup.category.errors.minlength">Mínimo 3 caracteres</small>
                <small *ngIf="getTheFormGroup.category.errors.maxlength">Máximo 50 caracteres</small>
              </div>
            </div>

            <div class="d-flex flex-wrap gap-2 justify-content-end">
              <button type="button" class="btn btn-ice-primary" *ngIf="mode == 1" (click)="back()">Regresar</button>
              <button type="button" class="btn btn-ice-success" *ngIf="mode == 2" (click)="createProduct()">Crear</button>
              <button type="button" class="btn btn-ice-warning" *ngIf="mode == 3" (click)="upProduct()">Actualizar</button>
              <button type="button" class="btn btn-ice-primary" *ngIf="mode == 2 || mode == 3" (click)="back()">Cancelar</button>
            </div>
          </form>

        </div>
      </div>
    </div>
  </div>
</div>
